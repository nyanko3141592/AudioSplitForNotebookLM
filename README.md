# AudioSplit for NotebookLM

## 概要
NotebookLMの200MB制限に対応し、音声ファイルの分割から文字起こし、要約まで一貫して行える統合ツール。完全にクライアントサイドで動作し、プライバシーを保護しながら高速に音声処理と文字起こしを実行します。

**ライブデモ**: [https://nyanko3141592.github.io/AudioSplitForNotebookLM/](https://nyanko3141592.github.io/AudioSplitForNotebookLM/)

## 主な機能

### ✨ 特徴
- **完全プライベート処理**: 音声ファイルはブラウザ内でのみ処理され、外部サーバーには一切送信されません
- **統合ワークフロー**: 音声分割 → 文字起こし → 要約を一つのツールで完結
- **高速処理**: Web Audio APIとWebAssembly技術により、大容量ファイルも高速に分割
- **AI文字起こし**: Google Gemini APIによる高精度な音声認識
- **インストール不要**: ブラウザだけで動作、ソフトウェアのインストール不要
- **オープンソース**: GitHubでコードを公開、安全性を確認可能

### 📋 機能詳細

#### 1. ステップワークフロー
**Step 1: ファイル選択**
- ドラッグ&ドロップまたはクリックで音声ファイルを選択
- 対応形式: MP3, WAV, M4A, OGG, WebM
- ファイルサイズ制限なし（ブラウザメモリの範囲内）

**Step 2: 分割設定**
- 最大サイズ指定モード（デフォルト: 190MB）
- 分割数指定モード（2〜100個に均等分割）
- リアルタイムプレビュー

**Step 3: 分割実行・結果確認**
- 高速分割処理（Web Audio API使用）
- 各ファイルの個別ダウンロード
- ZIP形式で一括ダウンロード

**Step 4: 文字起こし**
- Google Gemini APIによる高精度音声認識
- 背景情報追加で精度向上
- 結果のコピー・ダウンロード機能

**Step 5: 要約・整理**
- 複数の文字起こし結果を統合要約
- プリセット形式（会議録、講義ノート等）対応
- カスタムプロンプト機能

#### 2. 音声分割機能
**最大サイズ指定モード**
- デフォルト: 190MB（NotebookLMの200MB制限に安全マージンを確保）
- カスタム設定可能（1MB〜200MB）
- ファイルサイズに基づいて自動的に必要な分割数を計算
- **重複なし**: 各パートは完全に独立、音声の重複や欠落なし

**分割数指定モード**
- 2〜100個に均等分割
- 各ファイルの長さを均等に配分
- 最後のパートに端数を含む

#### 3. 文字起こし・要約機能
**AI文字起こし**
- Google Gemini Flash 1.5による高精度音声認識
- 背景情報を追加して文脈理解を向上
- バッチ処理による効率的な処理

**要約機能**
- 複数ファイルの文字起こし結果を統合
- プリセット形式：会議録、講義ノート、インタビュー記録
- カスタムプロンプトによる柔軟な出力調整

#### 4. 出力形式
**音声ファイル**
- 8-bit PCM WAV形式で出力（元ファイルより小さくなる場合があります）
- 分割ファイル名: `original_name_part1.wav`, `original_name_part2.wav`...
- 各ファイルを個別ダウンロード、ZIP形式で一括ダウンロード可能

**テキスト出力**
- 文字起こし結果：プレーンテキスト、コピー機能付き
- 要約結果：マークダウン形式、ダウンロード・コピー機能付き

## 技術仕様

### アーキテクチャ
- **処理方式**: 完全クライアントサイド処理（サーバー通信なし）
- **メモリ管理**: 自動メモリ解放機能により、大容量ファイル処理後も安定動作

### 音声処理エンジン
1. **Web Audio API（推奨）**
   - ブラウザネイティブAPIで高速処理
   - サンプルレベルの正確な分割（重複・欠落なし）
   - 8-bit PCM変換によりファイルサイズを最適化

2. **FFmpeg.wasm（フォールバック）**
   - Web Audio APIが利用できない場合に自動切り替え
   - より多くの音声形式をサポート
   - ストリーミング分割対応

### 技術スタック
- **React 19 + TypeScript**: モダンUIフレームワーク
- **Vite**: 高速ビルドツール、WASM対応
- **TailwindCSS v4**: モダンなグラデーションデザイン
- **Google Gemini API**: AI音声認識・要約
- **GitHub Pages**: 無料・高速ホスティング

## 使い方

### 基本的な使用手順

1. **ファイル選択**: 音声ファイルをドラッグ&ドロップまたはクリックして選択
2. **分割設定**: 
   - 最大サイズ指定（デフォルト190MB）
   - 分割数指定（2〜100個）
3. **分割実行**: ボタンをクリックして処理開始
4. **文字起こし（オプション）**: 
   - Gemini APIキーを設定
   - 背景情報を入力（精度向上のため）
   - バッチ処理で全ファイルを文字起こし
5. **要約作成（オプション）**: 
   - プリセット形式を選択または カスタムプロンプトを入力
   - 背景情報を追加して文脈理解を向上
   - 統合要約を生成

### APIキーの設定

文字起こし・要約機能を使用するには、Google AI StudioでGemini APIキーを取得してください：

1. [Google AI Studio](https://aistudio.google.com/app/apikey)にアクセス
2. 新しいAPIキーを作成
3. アプリの設定画面でAPIキーを入力
4. APIキーはブラウザのローカルストレージに安全に保存されます

## セキュリティ・プライバシー

🔒 **あなたのデータは安全に保護されています**

### 音声ファイル処理
- **完全ローカル処理**: 音声ファイルは一切サーバーに送信されません
- **メモリ自動削除**: 処理後は自動的にメモリから削除
- **ブラウザ内完結**: すべての分割処理はあなたのブラウザ内で実行

### AI機能（文字起こし・要約）
- **直接API通信**: Gemini APIとの通信は暗号化されています
- **APIキー保護**: APIキーはブラウザのローカルストレージに暗号化して保存
- **サーバー経由なし**: 当アプリのサーバーは一切経由しません
- **一時的処理**: 音声データはAPI処理後すぐに削除されます

### 透明性
- **オープンソース**: すべてのコードがGitHubで公開されています
- **監査可能**: セキュリティを自分で確認できます

## 動作環境

### 推奨ブラウザ
- Chrome 89以降
- Firefox 89以降
- Safari 15.4以降
- Edge 89以降

### システム要件
- メモリ: 4GB以上推奨
- 最大処理可能ファイルサイズ: 約2GB（ブラウザ依存）

## 既知の問題と制限事項

- **モバイルブラウザ**: メモリ制限により大容量ファイルの処理が困難
- **処理時間**: 1GB以上のファイルは数分かかる場合があります
- **出力形式**: 現在WAV形式のみ対応（元の形式に関わらず）

## トラブルシューティング

### Q: 分割後のファイルサイズが大きい
A: 8-bit PCM WAV形式で出力されるため、MP3等の圧縮形式より大きくなる場合があります。

### Q: 処理が遅い
A: Web Audio APIが使用されているか確認してください。ブラウザのコンソールでログを確認できます。

### Q: エラーが発生する
A: 以下を確認してください：
- ブラウザが推奨バージョン以上か
- メモリが十分にあるか
- 音声ファイルが破損していないか

## 開発者向け情報

### 環境構築

```bash
# リポジトリのクローン
git clone https://github.com/nyanko3141592/AudioSplitForNotebookLM.git
cd AudioSplitForNotebookLM

# 依存関係のインストール
npm install

# 開発サーバーの起動（http://localhost:5173）
npm run dev

# ビルド
npm run build

# ビルドのプレビュー
npm run preview
```

### プロジェクト構造

```
src/
├── components/       # UIコンポーネント
│   ├── WorkflowStepper.tsx      # ワークフロー進行表示
│   ├── ResultsSummary.tsx       # 過去ステップの結果表示
│   ├── TranscriptionPanel.tsx   # 文字起こしパネル
│   ├── steps/                   # ステップ別コンポーネント
│   │   ├── FileSelectionStep.tsx    # ファイル選択
│   │   ├── SplitConfigStep.tsx      # 分割設定
│   │   ├── SplitResultsStep.tsx     # 分割結果
│   │   ├── TranscriptionStep.tsx    # 文字起こし
│   │   └── SummaryStep.tsx          # 要約作成
│   ├── FileUpload.tsx           # ファイルアップロード
│   ├── SplitOptions.tsx         # 分割オプション設定
│   ├── ProgressBar.tsx          # 進捗表示
│   └── DownloadList.tsx         # ダウンロードリスト
├── hooks/           # カスタムフック
│   └── useFFmpeg.ts             # FFmpeg.wasm統合
├── utils/           # ユーティリティ
│   ├── audioSplitter.ts         # Web Audio API分割処理
│   ├── geminiTranscriber.ts     # Gemini API統合
│   ├── storage.ts               # ローカルストレージ管理
│   └── download.ts              # ダウンロード処理
└── App.tsx          # メインアプリケーション
```

### 技術的詳細

#### 分割アルゴリズム
1. 音声ファイルをArrayBufferとして読み込み
2. Web Audio APIでデコード
3. サンプルレベルで正確に分割（重複・欠落なし）
4. 8-bit PCM WAVとしてエンコード
5. Blobとして出力

#### メモリ管理
- AudioContext自動クローズ
- ArrayBuffer即座解放
- Blob URL自動revoke
- ガベージコレクション最適化

## コントリビューション

プルリクエストを歓迎します！
1. Forkする
2. Feature branchを作成 (`git checkout -b feature/AmazingFeature`)
3. 変更をコミット (`git commit -m 'Add some AmazingFeature'`)
4. Branchにプッシュ (`git push origin feature/AmazingFeature`)
5. Pull Requestを開く

## ライセンス

MIT License - 詳細は[LICENSE](LICENSE)ファイルを参照

## 作者

[@nyanko3141592](https://github.com/nyanko3141592)

## 謝辞

- NotebookLMチーム - 素晴らしいツールの提供
- FFmpeg.wasm - クロスプラットフォーム音声処理
- コントリビューターの皆様